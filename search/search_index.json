{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"OVRO\u2013LWA Spectral Kurtosis (SK) Pipeline","text":"<p>A research-grade, end-to-end Spectral Kurtosis (SK) analysis workflow for OVRO\u2013LWA total-power data, built on top of the <code>pyGSK</code> toolkit.</p> <p>This documentation provides:</p> <ul> <li>A high-level overview of the SK pipeline design</li> <li>A fully reproducible two-stage SK example using real OVRO\u2013LWA data</li> <li>Links to scripts, notebooks, and configuration files included in the repository</li> </ul>"},{"location":"#what-this-pipeline-provides","title":"\ud83d\ude80 What This Pipeline Provides","text":"<ul> <li>Single-file SK analysis (<code>ovro-lwa.py</code>)  </li> <li>Two-stage SK processing based on the generalized SK estimator  </li> <li>Batch-mode pipelines for large OVRO\u2013LWA datasets  </li> <li>Quicklook visualization tools for dynamic spectra and SK histograms  </li> <li>A demo HDF5 dataset included directly in the repository for testing</li> </ul> <p>The pipeline is intended as a bottom-up development model that will ultimately integrate into broader open-science workflows under the SUNCAST initiative.</p>"},{"location":"#documentation-sections","title":"\ud83d\udcc4 Documentation Sections","text":""},{"location":"#pipeline-overview","title":"\ud83d\udd39 Pipeline Overview","text":"<p>Conceptual description of the workflow, SK methodology, data flow, and architecture.</p>"},{"location":"#two-stage-sk-example","title":"\ud83d\udd39 Two-Stage SK Example","text":"<p>Detailed, real-data worked example with scripts and notebook versions.</p>"},{"location":"#repository-highlights","title":"\ud83d\udce6 Repository Highlights","text":"<ul> <li>Scripts: full command-line tools for SK streaming, renormalization, cleaning, and plotting  </li> <li>Notebooks: demonstration workflows suitable for exploration and teaching  </li> <li>Configs: ready-to-modify YAML templates  </li> <li>Data: a built-in OVRO\u2013LWA demo HDF5 file for immediate testing  </li> <li>Figures: example output plots  </li> </ul>"},{"location":"#requirements","title":"\ud83d\udd27 Requirements","text":"<ul> <li>Python \u2265 3.9  </li> <li><code>pyGSK</code> \u2265 2.1.0  </li> <li><code>numpy</code>, <code>matplotlib</code>, <code>h5py</code>, <code>yaml</code> </li> <li>(optional) JupyterLab  </li> </ul> <p>Full details are provided in the main repository <code>README.md</code>.</p>"},{"location":"#feedback-contributions","title":"\ud83d\udceb Feedback &amp; Contributions","text":"<p>This repository is under active development. Issues and suggestions are welcome through the GitHub issue tracker.</p>"},{"location":"#external-links","title":"\ud83d\udd17 External Links","text":"<ul> <li>pyGSK Toolkit: https://github.com/suncast-org/pyGSK  </li> <li>OVRO\u2013LWA Observatory: https://www.ovro.caltech.edu/lwa  </li> </ul>"},{"location":"ovro_lwa_readme/","title":"OVRO\u2013LWA Two\u2013Stage Spectral Kurtosis (SK) Example","text":"<p>A real\u2013data application of pyGSK \u2265 2.1.0</p> <p>This page documents a fully reproducible two\u2013stage Spectral Kurtosis (SK) workflow applied to OVRO\u2013LWA total\u2013power HDF5 data, demonstrating how to use <code>pygsk.runtests.run_sk_test</code> and related helpers in a real\u2013instrument pipeline.</p> <p>Two main entry points are provided:</p> <ul> <li><code>scripts/ovro-lwa.py</code> \u2014 command\u2013line application (publishable example).</li> <li><code>notebooks/ovro_lwa_two_stage_sk_example.ipynb</code> \u2014 equivalent Jupyter notebook,   ideal for exploration, teaching, and iterative analyses.</li> </ul> <p>Both examples implement:</p> <ul> <li>File autodetection (<code>basename</code>, <code>.h5</code>, <code>.hdf5</code>)</li> <li>Automatic extraction of XX/YY streams, frequency axes, and timestamps</li> <li>Two\u2013stage SK processing (Stage 1 \u2192 Stage 2 via SK renormalization)</li> <li>Time\u2013range selection (<code>--start-idx</code>, <code>--ns-max</code>)</li> <li>Optional output (plots/NPZ saved only when explicitly requested)</li> <li>Filename tags encoding time ranges, SK parameters, stage, and polarization</li> </ul>"},{"location":"ovro_lwa_readme/#1-overview-of-the-twostage-sk-method","title":"1. Overview of the Two\u2013Stage SK Method","text":"<p>The SK estimator (Nita &amp; Gary 2010) provides robust RFI/outlier detection for spectral\u2013domain instruments. OVRO\u2013LWA data, like many low\u2013frequency arrays, benefit from a two\u2013stage SK approach:</p>"},{"location":"ovro_lwa_readme/#stage-1","title":"Stage 1","text":"<ul> <li>Integrates using <code>(M1, N1, d)</code></li> <li>Produces first\u2013order SK and flags</li> <li>Generates block\u2013summed spectra (<code>s1</code>) for Stage 2</li> </ul>"},{"location":"ovro_lwa_readme/#stage-2","title":"Stage 2","text":"<ul> <li>Uses the Stage 1 output <code>s1</code> as the new \u201cpower\u201d</li> <li>Integrates over a much longer effective number of samples:</li> </ul> <p><code>text   N2 = M1 \u00d7 N1</code></p> <ul> <li>Produces high\u2013sensitivity SK diagnostics</li> <li>Identifies persistent or subtle bursts, transients, or RFI</li> </ul> <p>Both stages use the same <code>run_sk_test()</code> machinery, and both support:</p> <ul> <li>Histograms</li> <li>Context (dynamic spectrum) plots</li> <li>Automatic thresholds for a given probability of false alarm (<code>pfa</code>)</li> <li>Verbose diagnostics and logging</li> </ul>"},{"location":"ovro_lwa_readme/#2-file-structure-in-this-repository","title":"2. File Structure in This Repository","text":"<p>The OVRO\u2013LWA example in this repository lives at the top level rather than under <code>examples/</code>. The relevant files are:</p> <pre><code>ovro-lwa-sk-pipeline/\n\u2502\n\u251c\u2500\u2500 scripts/\n\u2502   \u251c\u2500\u2500 ovro-lwa.py                          # Two\u2013stage SK CLI example\n\u2502   \u251c\u2500\u2500 ovro_lwa_sk_stream.py                # Stage 1 streaming SK\n\u2502   \u251c\u2500\u2500 ovro_lwa_rfi_clean.py                # Stage 2 cleaning / renormalization\n\u2502   \u251c\u2500\u2500 ovro_lwa_sk_quicklook.py             # Quicklook plotting\n\u2502   \u251c\u2500\u2500 ovro_lwa_batch_stream.py             # Batch Stage 1\n\u2502   \u251c\u2500\u2500 ovro_lwa_batch_rfi_clean.py          # Batch Stage 2\n\u2502   \u251c\u2500\u2500 ovro_lwa_batch_quicklook.py          # Batch quicklook\n\u2502   \u2514\u2500\u2500 ovro_lwa_batch_pipeline.py           # 3-stage batch pipeline driver\n\u2502\n\u251c\u2500\u2500 notebooks/\n\u2502   \u2514\u2500\u2500 ovro_lwa_two_stage_sk_example.ipynb  # Jupyter notebook version\n\u2502\n\u251c\u2500\u2500 figures/\n\u2502   \u251c\u2500\u2500 060963_182827094797b4e9492_XX_t10000-15000_M64_N24_d1.0_stage1_hist.png\n\u2502   \u2514\u2500\u2500 060963_182827094797b4e9492_XX_t10000-15000_M8_N1536_d1.0_stage2_hist.png\n\u2502\n\u2514\u2500\u2500 data/demo/\n    \u2514\u2500\u2500 ovro_lwa_demo.h5                     # Small demo HDF5 file\n</code></pre>"},{"location":"ovro_lwa_readme/#3-running-the-command-line-application-ovro-lwapy","title":"3. Running the Command-Line Application (<code>ovro-lwa.py</code>)","text":"<p>Although the scripts can be run from anywhere via <code>$PATH</code>, the examples below assume you are in the repository root.</p>"},{"location":"ovro_lwa_readme/#basic-usage-no-output-saved","title":"Basic usage (no output saved)","text":"<pre><code>python scripts/ovro-lwa.py data/demo/ovro_lwa_demo.h5\n</code></pre> <p>This will display diagnostic plots interactively and not save files unless explicit options are given.</p>"},{"location":"ovro_lwa_readme/#selecting-a-time-range","title":"Selecting a time range","text":"<p>Process only the first 50,000 time frames:</p> <pre><code>python scripts/ovro-lwa.py data/demo/ovro_lwa_demo.h5 --ns-max 50000\n</code></pre> <p>Start at index 10,000 and read 5,000 frames:</p> <pre><code>python scripts/ovro-lwa.py data/demo/ovro_lwa_demo.h5 --start-idx 10000 --ns-max 5000\n</code></pre> <p>The script safely clips ranges so it never exceeds file limits.</p>"},{"location":"ovro_lwa_readme/#saving-outputs","title":"Saving outputs","text":"<p>Save PNGs:</p> <pre><code>python scripts/ovro-lwa.py data/demo/ovro_lwa_demo.h5 --save-plot --outdir results\n</code></pre> <p>Save NPZ diagnostics:</p> <pre><code>python scripts/ovro-lwa.py data/demo/ovro_lwa_demo.h5 --save-npz --outdir results\n</code></pre> <p>Save both:</p> <pre><code>python scripts/ovro-lwa.py data/demo/ovro_lwa_demo.h5 --save-plot --save-npz --outdir results\n</code></pre>"},{"location":"ovro_lwa_readme/#full-example","title":"Full example","text":"<pre><code>python scripts/ovro-lwa.py   data/demo/ovro_lwa_demo.h5   --pol XX   --M1 64 --M2 8 --N 24 --d 1.0   --pfa 1e-3   --start-idx 0 --ns-max 50000   --scale log --cmap magma   --save-plot --save-npz   --outdir results\n</code></pre>"},{"location":"ovro_lwa_readme/#4-filename-convention","title":"4. Filename Convention","text":"<p>Output files include:</p> <ul> <li>HDF5 base name</li> <li>Polarization (XX/YY)</li> <li>Time range: <code>t&lt;start&gt;-&lt;stop&gt;</code></li> <li>Stage (<code>stage1</code> or <code>stage2</code>)</li> <li>SK parameters: <code>M&lt;M&gt;_N&lt;N&gt;_d&lt;d&gt;</code></li> </ul> <p>Example Stage 1 output:</p> <pre><code>060963_182827094797b4e9492_XX_t10000-15000_M64_N24_d1.0_stage1_hist.png\n</code></pre> <p>and Stage 2 output:</p> <pre><code>060963_182827094797b4e9492_XX_t10000-15000_M8_N1536_d1.0_stage2_hist.png\n</code></pre> <p>This makes batch runs self\u2013documenting.</p>"},{"location":"ovro_lwa_readme/#5-example-outputs-stage-1-and-stage-2","title":"5. Example Outputs (Stage 1 and Stage 2)","text":"<p>The following figures were generated with a command like:</p> <pre><code>python scripts/ovro-lwa.py   data/demo/ovro_lwa_demo.h5   --pol XX   --start-idx 10000   --ns-max 5000   --scale log   --save-plot\n</code></pre> <p>Time range:</p> <pre><code>t10000\u201315000\n</code></pre>"},{"location":"ovro_lwa_readme/#stage-1-output-m1-64-n1-24-d-1","title":"Stage 1 Output (M1 = 64, N1 = 24, d = 1)","text":""},{"location":"ovro_lwa_readme/#stage-2-output-m2-8-n2-1536-d-1","title":"Stage 2 Output (M2 = 8, N2 = 1536, d = 1)","text":""},{"location":"ovro_lwa_readme/#6-jupyter-notebook-version","title":"6. Jupyter Notebook Version","text":"<p>File: <code>notebooks/ovro_lwa_two_stage_sk_example.ipynb</code></p> <p>Features:</p> <ul> <li>Editable configuration cell</li> <li>Fully documented workflow</li> <li>Inline figures</li> <li>Ideal for experimentation and teaching</li> </ul> <p>Run it in JupyterLab, Jupyter Notebook, or VS Code, making sure your Python environment has <code>pyGSK</code> and friends available.</p>"},{"location":"ovro_lwa_readme/#7-batch-processing-pipeline","title":"7. Batch Processing Pipeline","text":"<p>The OVRO\u2013LWA example set includes a small three\u2013stage SK analysis pipeline:</p> <ol> <li>SK streaming (<code>ovro_lwa_sk_stream.py</code>)</li> <li>RFI cleaning (<code>ovro_lwa_rfi_clean.py</code>)</li> <li>Quicklook plotting (<code>ovro_lwa_sk_quicklook.py</code>)</li> </ol> <p>For convenience, there are three batch wrappers and one unified driver:</p> <ul> <li><code>ovro_lwa_batch_stream.py</code> \u2013 run Stage 1 for many raw HDF5 files</li> <li><code>ovro_lwa_batch_rfi_clean.py</code> \u2013 run Stage 2 for many <code>_skstream.h5</code> files</li> <li><code>ovro_lwa_batch_quicklook.py</code> \u2013 run Stage 3 for many SK products</li> <li><code>ovro_lwa_batch_pipeline.py</code> \u2013 run all three stages in sequence for each raw file</li> </ul> <p>All batch scripts accept either:</p> <ul> <li>an explicit list of files, and/or  </li> <li>an input directory (<code>--indir</code>) plus a glob pattern (<code>--pattern</code>).</li> </ul> <p>A <code>--dry-run</code> flag is available in all batch scripts; it prints the commands that would be executed without actually running them.</p>"},{"location":"ovro_lwa_readme/#example-full-threestage-pipeline","title":"Example: full three\u2013stage pipeline","text":"<pre><code>python scripts/ovro_lwa_batch_pipeline.py   --indir /path/to/ovro_lwa/raw_h5_files   --pattern \"060963_*\"   --stream-out ./results   --rfi-out ./results   --png-out ./png   --M 64 --N 24 --d 1.0 --pfa 1e-3   --F-block 8 --flag-mode separate   --pol both   --scale log --vmin 1e6 --vmax 1e8\n</code></pre>"},{"location":"ovro_lwa_readme/#8-requirements","title":"8. Requirements","text":"<ul> <li>Python \u2265 3.9 (3.11 recommended)</li> <li><code>pyGSK</code> \u2265 2.1.0</li> <li><code>numpy</code></li> <li><code>matplotlib</code></li> <li><code>h5py</code></li> <li>(for notebooks) JupyterLab or Jupyter Notebook</li> </ul>"},{"location":"ovro_lwa_readme/#9-attribution","title":"9. Attribution","text":"<p>The Spectral Kurtosis formalism is based on:</p> <ul> <li>Nita &amp; Gary (2010), The Generalized Spectral Kurtosis Estimator, PASP, 122, 595.</li> </ul> <p>This example is built on the pyGSK toolkit:</p> <ul> <li>https://github.com/suncast-org/pyGSK</li> </ul>"},{"location":"pipeline_overview/","title":"OVRO\u2013LWA SK Pipeline Overview","text":"<p>This documentation describes the OVRO\u2013LWA Spectral Kurtosis (SK) Pipeline, a bottom\u2013up, real\u2013data application of the pyGSK \u2013 Generalized Spectral Kurtosis Toolkit.</p> <p>The goal of this repository is to provide a reproducible, end\u2013to\u2013end workflow for SK-based analysis of OVRO\u2013LWA HDF5 data, including:</p> <ul> <li>A small, tracked demo dataset for quick testing</li> <li>Standalone command-line scripts for single-file and batch processing</li> <li>A two\u2013stage SK workflow suitable for publication\u2013quality analyses</li> <li>Jupyter notebooks for exploration, teaching, and iterative development</li> </ul>"},{"location":"pipeline_overview/#repository-layout-summary","title":"Repository Layout (Summary)","text":"<p>At a high level, the repository is organized as follows:</p> <pre><code>ovro-lwa-sk-pipeline/\n\u251c\u2500\u2500 README.md                     # High-level description and quickstart\n\u251c\u2500\u2500 mkdocs.yml                    # MkDocs configuration for this documentation\n\u251c\u2500\u2500 .github/workflows/            # GitHub Actions (docs deployment)\n\u2502\n\u251c\u2500\u2500 configs/                      # YAML configuration files (WIP)\n\u2502   \u2514\u2500\u2500 ovro_lwa_example.yaml\n\u2502\n\u251c\u2500\u2500 data/\n\u2502   \u251c\u2500\u2500 README.md                 # Notes about data organization\n\u2502   \u2514\u2500\u2500 demo/\n\u2502       \u2514\u2500\u2500 ovro_lwa_demo.h5      # 13.5 MB OVRO\u2013LWA demo dataset (tracked)\n\u2502\n\u251c\u2500\u2500 docs/                         # This documentation site\n\u2502   \u251c\u2500\u2500 pipeline_overview.md      # (this file)\n\u2502   \u2514\u2500\u2500 ovro_lwa_readme.md        # Two\u2013stage SK example documentation\n\u2502\n\u251c\u2500\u2500 figures/\n\u2502   \u251c\u2500\u2500 060963_..._stage1_hist.png\n\u2502   \u2514\u2500\u2500 060963_..._stage2_hist.png\n\u2502\n\u251c\u2500\u2500 notebooks/\n\u2502   \u251c\u2500\u2500 ovro_lwa_single_file_pipeline_demo.ipynb\n\u2502   \u2514\u2500\u2500 ovro_lwa_two_stage_sk_example.ipynb\n\u2502\n\u2514\u2500\u2500 scripts/\n    \u251c\u2500\u2500 ovro-lwa.py\n    \u251c\u2500\u2500 ovro_lwa_sk_quicklook.py\n    \u251c\u2500\u2500 ovro_lwa_sk_stream.py\n    \u251c\u2500\u2500 ovro_lwa_rfi_clean.py\n    \u251c\u2500\u2500 ovro_lwa_batch_pipeline.py\n    \u251c\u2500\u2500 ovro_lwa_batch_quicklook.py\n    \u251c\u2500\u2500 ovro_lwa_batch_rfi_clean.py\n    \u251c\u2500\u2500 ovro_lwa_batch_stream.py\n    \u251c\u2500\u2500 ovro_lwa_batch_twostage.py\n    \u251c\u2500\u2500 make_ovro_lwa_segment.py\n    \u251c\u2500\u2500 inspect_h5.py\n    \u2514\u2500\u2500 run_ovro_lwa_sk_pipeline.py  # High-level driver (placeholder)\n</code></pre> <p>For details of the two\u2013stage SK method and example outputs, see the separate page \u201cTwo\u2013Stage SK Example\u201d in the navigation.</p>"},{"location":"pipeline_overview/#demo-dataset","title":"Demo Dataset","text":"<p>A small OVRO\u2013LWA total\u2013power HDF5 file is included to allow running the pipeline immediately after cloning the repository.</p> <p>Path:</p> <pre><code>data/demo/ovro_lwa_demo.h5\n</code></pre> <p>Characteristics:</p> <ul> <li>Size: ~13.5 MB</li> <li>Format: OVRO\u2013LWA HDF5</li> <li>Contains: A short time\u2013frequency segment suitable for SK thresholding,   RFI detection, and quicklook generation.</li> <li>Intended use: quick testing of scripts and notebooks, CI-style smoke tests,   and demonstrations on systems without access to large raw data volumes.</li> </ul> <p>The <code>.gitignore</code> rules are configured so that only this demo file is tracked. All other HDF5/FITS/NPZ products placed under <code>data/</code> remain untracked unless explicitly whitelisted.</p>"},{"location":"pipeline_overview/#core-scripts-and-workflows","title":"Core Scripts and Workflows","text":"<p>The pipeline is structured around three conceptual stages:</p> <ol> <li>Streaming SK computation \u2013 compute SK over chunks of the dynamic spectrum.</li> <li>RFI cleaning / flagging \u2013 apply SK-based thresholds and generate masks.</li> <li>Quicklook products \u2013 create diagnostic histograms and context plots.</li> </ol> <p>The following scripts implement these stages and their batch wrappers:</p> <ul> <li><code>ovro_lwa_sk_stream.py</code> \u2013 Stage 1 SK processing for a single file</li> <li><code>ovro_lwa_rfi_clean.py</code> \u2013 Stage 2 SK / RFI cleaning</li> <li><code>ovro_lwa_sk_quicklook.py</code> \u2013 quicklook plotting for SK products</li> <li><code>ovro_lwa_batch_stream.py</code> \u2013 Stage 1 over many files</li> <li><code>ovro_lwa_batch_rfi_clean.py</code> \u2013 Stage 2 over many SK products</li> <li><code>ovro_lwa_batch_quicklook.py</code> \u2013 quicklook plots for many SK products</li> <li><code>ovro_lwa_batch_pipeline.py</code> \u2013 convenience driver that runs all three stages</li> <li><code>ovro-lwa.py</code> \u2013 a \u201cclassic\u201d two\u2013stage SK example, also mirrored in a notebook</li> </ul> <p>Additional helpers:</p> <ul> <li><code>make_ovro_lwa_segment.py</code> \u2013 create trimmed segments from larger files</li> <li><code>inspect_h5.py</code> \u2013 quick inspection of OVRO\u2013LWA HDF5 file structure</li> <li><code>run_ovro_lwa_sk_pipeline.py</code> \u2013 high-level wrapper (to be expanded)</li> </ul>"},{"location":"pipeline_overview/#notebooks","title":"Notebooks","text":"<p>Two notebooks mirror and complement the command-line workflows:</p> <ul> <li> <p><code>ovro_lwa_single_file_pipeline_demo.ipynb</code>   End-to-end SK analysis of the demo file, using the local <code>data/demo/</code> dataset.</p> </li> <li> <p><code>ovro_lwa_two_stage_sk_example.ipynb</code>   Full two\u2013stage SK example equivalent to <code>ovro-lwa.py</code>,   ideal for exploration and teaching.</p> </li> </ul> <p>These are designed to run out of the box with the included demo file, assuming <code>pyGSK</code> and other dependencies are installed.</p>"},{"location":"pipeline_overview/#installation-and-environment","title":"Installation and Environment","text":"<p>A typical setup might look like:</p> <pre><code>git clone https://github.com/Gelu-Nita/ovro-lwa-sk-pipeline.git\ncd ovro-lwa-sk-pipeline\n\nconda create -n ovro-lwa-sk python=3.11\nconda activate ovro-lwa-sk\n\npip install pygsk numpy scipy matplotlib astropy h5py pyyaml\n</code></pre> <p>On systems like <code>pipeline</code>, you may also define convenience variables:</p> <pre><code>export OVRO_LWA_SK_HOME=\"$HOME/lwa/ovro-lwa-sk-pipeline\"\nexport PATH=\"$OVRO_LWA_SK_HOME/scripts:$PATH\"\n</code></pre> <p>so that scripts like <code>ovro_lwa_sk_quicklook.py</code> can be run from any directory.</p>"},{"location":"pipeline_overview/#minimal-example-run","title":"Minimal Example Run","text":"<p>After installation, a minimal quicklook run on the demo file might be:</p> <pre><code>ovro_lwa_sk_quicklook.py data/demo/ovro_lwa_demo.h5\n</code></pre> <p>or, explicitly specifying <code>python</code>:</p> <pre><code>python scripts/ovro_lwa_sk_quicklook.py data/demo/ovro_lwa_demo.h5\n</code></pre> <p>More advanced usage (two\u2013stage SK, batch processing, etc.) is described in the Two\u2013Stage SK Example page and in the script docstrings.</p>"},{"location":"pipeline_overview/#relationship-to-pygsk-and-suncast","title":"Relationship to pyGSK and SUNCAST","text":"<p>This repository is intended as an application-level companion to <code>pyGSK</code>, not as a replacement:</p> <ul> <li>All SK calculations are performed by <code>pyGSK</code>.</li> <li>This code focuses on OVRO\u2013LWA\u2013specific data handling and workflow glue.</li> <li>The repository is a bottom\u2013up prototype that may later inform   SUNCAST-hosted workflows and examples.</li> </ul> <p>When the pipeline matures, the intention is to: - propose selected components for inclusion in SUNCAST workflows, and - register a Zenodo record once the repository is transferred to   the <code>suncast-org</code> GitHub organization.</p>"}]}